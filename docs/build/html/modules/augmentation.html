

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>torch_connectomics.data.augmentation &mdash; pytorch_connectomics master documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'master',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="torch_connectomics.data.datasets" href="datasets.html" />
    <link rel="prev" title="torch_connectomics.model" href="model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo_text.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                master (0.1)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notes/installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/snemi.html">Neuron Segmentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Package Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="model.html">torch_connectomics.model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="model.html#module-torch_connectomics.model.blocks">Building Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html#module-torch_connectomics.model.model_zoo">Model Zoo</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">torch_connectomics.data.augmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">torch_connectomics.data.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">torch_connectomics.utils</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utils.html#segmentation">Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html#network-training-inference">Network Training &amp; Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html#visualization">Visualization</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pytorch_connectomics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>torch_connectomics.data.augmentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/augmentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="torch-connectomics-data-augmentation">
<h1>torch_connectomics.data.augmentation<a class="headerlink" href="#torch-connectomics-data-augmentation" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-torch_connectomics.data.augmentation"></span><dl class="class">
<dt id="torch_connectomics.data.augmentation.Compose">
<em class="property">class </em><code class="descname">Compose</code><span class="sig-paren">(</span><em>transforms</em>, <em>input_size=(8</em>, <em>196</em>, <em>196)</em>, <em>keep_uncropped=False</em>, <em>keep_non_smoothed=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/composition.html#Compose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Compose" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose transforms</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>transforms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of transformations to compose.</li>
<li><strong>input_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – input size of model in (z, y, x).</li>
<li><strong>keep_uncropped</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – keep uncropped images and labels (default: False).</li>
<li><strong>keep_non_smooth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – return also the non-smoothed masks (default: False).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.DataAugment">
<em class="property">class </em><code class="descname">DataAugment</code><span class="sig-paren">(</span><em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/augmentor.html#DataAugment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.DataAugment" title="Permalink to this definition">¶</a></dt>
<dd><p>DataAugment interface.</p>
<ol class="arabic simple">
<li>Randomly generate parameters for current augmentation methods.</li>
<li>Apply the paramters to the valid_mask and generate a new one.</li>
<li>Calculate new input size and sample from the volume.</li>
<li>Apply the augmentation method to the new sample and crop to input_size.</li>
</ol>
<dl class="method">
<dt id="torch_connectomics.data.augmentation.DataAugment.set_params">
<code class="descname">set_params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/augmentor.html#DataAugment.set_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.DataAugment.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate appropriate sample wize with data augmentation.</p>
<p>Some data augmentation (wrap, mis-alignment etc.) require larger
sample size than the original, depending on the augmentation parameters
that are randomly chosen. For such cases, here we determine random augmentation
parameters and return an updated input size accordingly.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.Elastic">
<em class="property">class </em><code class="descname">Elastic</code><span class="sig-paren">(</span><em>alpha=10.0</em>, <em>sigma=4.0</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/warp.html#Elastic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Elastic" title="Permalink to this definition">¶</a></dt>
<dd><p>Elastic deformation of images as described in <a class="reference internal" href="#simard2003" id="id1">[Simard2003]</a> (with modifications).
Based on <a class="reference external" href="https://gist.github.com/erniejunior/601cdf56d2b424757de5">https://gist.github.com/erniejunior/601cdf56d2b424757de5</a>.</p>
<table class="docutils citation" frame="void" id="simard2003" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Simard2003]</a></td><td>Simard, Steinkraus and Platt, “Best Practices for
Convolutional Neural Networks applied to Visual Document Analysis”, in
Proc. of the International Conference on Document Analysis and
Recognition, 2003.</td></tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>alpha</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – maximum pixel-moving distance of elastic transformation.</li>
<li><strong>sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – standard deviation of the Gaussian filter.</li>
<li><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.Grayscale">
<em class="property">class </em><code class="descname">Grayscale</code><span class="sig-paren">(</span><em>contrast_factor=0.3</em>, <em>brightness_factor=0.3</em>, <em>mode='mix'</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/grayscale.html#Grayscale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Grayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Grayscale value augmentation.</p>
<p>Randomly adjust contrast/brightness, randomly invert
and apply random gamma correction.</p>
<dl class="method">
<dt id="torch_connectomics.data.augmentation.Grayscale.augment2D">
<code class="descname">augment2D</code><span class="sig-paren">(</span><em>data</em>, <em>random_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/grayscale.html#Grayscale.augment2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Grayscale.augment2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Adapted from ELEKTRONN (<a class="reference external" href="http://elektronn.org/">http://elektronn.org/</a>).</p>
</dd></dl>

<dl class="method">
<dt id="torch_connectomics.data.augmentation.Grayscale.augment3D">
<code class="descname">augment3D</code><span class="sig-paren">(</span><em>data</em>, <em>random_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/grayscale.html#Grayscale.augment3D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Grayscale.augment3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Adapted from ELEKTRONN (<a class="reference external" href="http://elektronn.org/">http://elektronn.org/</a>).</p>
</dd></dl>

<dl class="method">
<dt id="torch_connectomics.data.augmentation.Grayscale.invert">
<code class="descname">invert</code><span class="sig-paren">(</span><em>data</em>, <em>random_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/grayscale.html#Grayscale.invert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Grayscale.invert" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert input images</p>
</dd></dl>

<dl class="method">
<dt id="torch_connectomics.data.augmentation.Grayscale.set_mode">
<code class="descname">set_mode</code><span class="sig-paren">(</span><em>mode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/grayscale.html#Grayscale.set_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Grayscale.set_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set 2D/3D/mix greyscale value augmentation mode.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.Rotate">
<em class="property">class </em><code class="descname">Rotate</code><span class="sig-paren">(</span><em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/rotation.html#Rotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Continuous rotatation.</p>
<p>The sample size for x- and y-axes should be at least sqrt(2) times larger
than the input size to make sure there is no non-valid region after center-crop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.Rescale">
<em class="property">class </em><code class="descname">Rescale</code><span class="sig-paren">(</span><em>low=0.8</em>, <em>high=1.2</em>, <em>fix_aspect=False</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/rescale.html#Rescale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescale augmentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>low</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – lower bound of the random scale factor.</li>
<li><strong>high</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – higher bound of the random scale factor.</li>
<li><strong>fix_aspect</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – fix aspect ratio or not.</li>
<li><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.MisAlignment">
<em class="property">class </em><code class="descname">MisAlignment</code><span class="sig-paren">(</span><em>displacement=16</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/misalign.html#MisAlignment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.MisAlignment" title="Permalink to this definition">¶</a></dt>
<dd><p>Mis-alignment augmentation of image stacks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>displacement</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – maximum pixel displacement in each direction (x and y).</li>
<li><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.MissingSection">
<em class="property">class </em><code class="descname">MissingSection</code><span class="sig-paren">(</span><em>num_sections=2</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/missing_section.html#MissingSection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.MissingSection" title="Permalink to this definition">¶</a></dt>
<dd><p>Missing-section augmentation of image stacks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>num_sections</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – number of missing sections.</li>
<li><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.MissingParts">
<em class="property">class </em><code class="descname">MissingParts</code><span class="sig-paren">(</span><em>deformation_strength=0</em>, <em>iterations=20</em>, <em>deform_ratio=0.25</em>, <em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/missing_parts.html#MissingParts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.MissingParts" title="Permalink to this definition">¶</a></dt>
<dd><p>Missing-parts augmentation of image stacks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>deformation_strength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – </li>
<li><strong>iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – (default: 80)</li>
<li><strong>deform_ratio</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – </li>
<li><strong>p</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – probability of applying the augmentation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="torch_connectomics.data.augmentation.Flip">
<em class="property">class </em><code class="descname">Flip</code><span class="sig-paren">(</span><em>p=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/torch_connectomics/data/augmentation/flip.html#Flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#torch_connectomics.data.augmentation.Flip" title="Permalink to this definition">¶</a></dt>
<dd><p>Flip along z-, y- and x-axes as well as swap y- and x-axes</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datasets.html" class="btn btn-neutral float-right" title="torch_connectomics.data.datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="model.html" class="btn btn-neutral float-left" title="torch_connectomics.model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Zudi Lin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>